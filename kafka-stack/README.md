# PostgreSQL + ClickHouse + Apache Kafka (Docker Compose)

–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å–æ–æ–±—â–µ–Ω–∏–π —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏–π –≤ **PostgreSQL** –∏ **ClickHouse**.

---

## üß± –°–æ—Å—Ç–∞–≤ —Å–∏—Å—Ç–µ–º—ã

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–æ—Ä—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|-------------|------|-------------|
| **PostgreSQL** | –†–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–±—ã—Ç–∏–π | `5432` | –°—Ö–µ–º–∞ `app`, —Ç–∞–±–ª–∏—Ü–∞ `app.events` |
| **ClickHouse** | –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–±—ã—Ç–∏–π | `8123` (HTTP), `9000` (TCP) | –ë–î `app`, —Ç–∞–±–ª–∏—Ü–∞ `app.events` |
| **Kafka** | –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π (KRaft, –±–µ–∑ ZooKeeper) | `29092` | –¢–æ–ø–∏–∫ `${KAFKA_TOPIC}` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `demo_topic`) |
| **kafka-init** | –°–æ–∑–¥–∞—ë—Ç —Ç–æ–ø–∏–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | ‚Äî | –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| **producer** | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka | ‚Äî | 10 JSON-—Å–æ–æ–±—â–µ–Ω–∏–π |
| **consumer** | –°–ª—É—à–∞–µ—Ç Kafka –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥ | ‚Äî | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **consumer-writer** | –ß–∏—Ç–∞–µ—Ç Kafka –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ Postgres –∏ ClickHouse | ‚Äî | –°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
kafka-stack/
‚îú‚îÄ docker-compose.yml
‚îú‚îÄ .env
‚îú‚îÄ README.md
‚îú‚îÄ postgres/init/001_schema.sql
‚îú‚îÄ clickhouse/init/001_schema.sql
‚îî‚îÄ app/
    ‚îú‚îÄ Dockerfile
    ‚îú‚îÄ requirements.txt
    ‚îú‚îÄ producer.py
    ‚îú‚îÄ consumer.py
    ‚îî‚îÄ consumer_writer.py
```
